/**
 * PluginDetailPanel Component Styles
 */

.plugin-detail-panel {
  display: flex;
  flex-direction: column;
  height: 100%;
  max-height: 80vh;
  overflow-y: auto;
  padding: var(--spacing-6);
  background: rgb(var(--color-bg-primary));
}

/* 确保在 overlay 中时能正确滚动 */
.plugin-detail-panel-overlay .plugin-detail-panel {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Loading State */
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-12);
  color: rgb(var(--color-text-secondary));
}

.loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid rgb(var(--color-border-default));
  border-top-color: rgb(var(--color-accent-primary));
  border-radius: var(--radius-full);
  animation: spin 0.8s linear infinite;
  margin-bottom: var(--spacing-4);
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Error State */
.error-state {
  display: flex;
  justify-content: center;
  padding: var(--spacing-12);
  color: rgb(var(--color-error));
}

/* Header */
.detail-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-6);
  padding-bottom: var(--spacing-4);
  border-bottom: var(--border-width) solid rgb(var(--color-border-default));
}

.plugin-info {
  flex: 1;
}

.plugin-name {
  margin: 0 0 var(--spacing-1) 0;
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-semibold);
  color: rgb(var(--color-text-primary));
}

.plugin-version {
  margin: 0 0 var(--spacing-1) 0;
  font-size: var(--font-size-base);
  color: rgb(var(--color-text-secondary));
}

.plugin-author {
  margin: 0;
  font-size: var(--font-size-sm);
  color: rgb(var(--color-text-secondary));
}

.close-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xl);
  color: rgb(var(--color-text-secondary));
  cursor: pointer;
  transition: all var(--duration-normal) var(--easing-default);
}

.close-btn:hover {
  background: rgb(var(--color-bg-hover));
  color: rgb(var(--color-text-primary));
}

/* Sections */
.detail-section {
  margin-bottom: var(--spacing-6);
  padding: var(--spacing-4);
  background: rgb(var(--color-bg-secondary));
  border-radius: var(--radius-md);
}

.detail-section > h3 {
  margin: 0 0 var(--spacing-4) 0;
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: rgb(var(--color-text-primary));
}

.plugin-description {
  margin: 0;
  font-size: var(--font-size-base);
  color: rgb(var(--color-text-secondary));
  line-height: var(--line-height-relaxed);
}

/* Section Header */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-4);
}

.section-header h3 {
  margin: 0;
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: rgb(var(--color-text-primary));
}

.refresh-btn {
  padding: var(--spacing-1) var(--spacing-2);
  border: var(--border-width) solid rgb(var(--color-border-default));
  background: rgb(var(--color-bg-primary));
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  color: rgb(var(--color-text-secondary));
  cursor: pointer;
  transition: all var(--duration-normal) var(--easing-default);
}

.refresh-btn:hover:not(:disabled) {
  background: rgb(var(--color-bg-hover));
  color: rgb(var(--color-text-primary));
}

.refresh-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Health Status */
.health-status {
  padding: var(--spacing-4);
  border-radius: var(--radius-sm);
  background: rgb(var(--color-bg-primary));
  border-left: 4px solid rgb(var(--color-border-default));
}

.health-status.healthy {
  border-left-color: rgb(var(--color-success));
}

.health-status.warning {
  border-left-color: rgb(var(--color-warning));
}

.health-status.error {
  border-left-color: rgb(var(--color-error));
}

.health-status.unknown {
  border-left-color: rgb(var(--color-text-secondary));
}

.health-indicator {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  margin-bottom: var(--spacing-3);
}

.health-icon {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
}

.health-status.healthy .health-icon {
  background: rgba(var(--color-success), 0.15);
  color: rgb(var(--color-success));
}

.health-status.warning .health-icon {
  background: rgba(var(--color-warning), 0.15);
  color: rgb(var(--color-warning));
}

.health-status.error .health-icon {
  background: rgba(var(--color-error), 0.15);
  color: rgb(var(--color-error));
}

.health-status.unknown .health-icon {
  background: rgb(var(--color-bg-tertiary));
  color: rgb(var(--color-text-secondary));
}

.health-text {
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-base);
  color: rgb(var(--color-text-primary));
}

.health-message {
  margin: 0 0 var(--spacing-3) 0;
  font-size: var(--font-size-sm);
  color: rgb(var(--color-text-secondary));
}

.health-errors {
  margin-top: var(--spacing-4);
}

.health-errors h4 {
  margin: 0 0 var(--spacing-2) 0;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: rgb(var(--color-text-primary));
}

.error-item {
  padding: var(--spacing-3);
  margin-bottom: var(--spacing-2);
  background: rgba(var(--color-error), 0.1);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
}

.error-item code {
  display: block;
  margin-bottom: var(--spacing-1);
  font-weight: var(--font-weight-semibold);
  color: rgb(var(--color-error));
}

.error-item p {
  margin: var(--spacing-1) 0;
  color: rgb(var(--color-text-secondary));
}

.error-item small {
  color: rgb(var(--color-text-tertiary));
}

.last-checked {
  margin: var(--spacing-2) 0 0 0;
  font-size: var(--font-size-sm);
  color: rgb(var(--color-text-tertiary));
}

/* Usage Stats */
.usage-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-4);
}

.stat-item {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-1);
}

.stat-label {
  font-size: var(--font-size-sm);
  color: rgb(var(--color-text-secondary));
}

.stat-value {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: rgb(var(--color-text-primary));
}

/* Permissions */
.permissions-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2);
}

.permission-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-2) var(--spacing-3);
  background: rgb(var(--color-bg-primary));
  border: var(--border-width) solid rgb(var(--color-border-default));
  border-radius: var(--radius-sm);
}

.permission-name {
  font-size: var(--font-size-sm);
  font-family: var(--font-family-mono);
  color: rgb(var(--color-text-primary));
}

.permission-toggle {
  padding: var(--spacing-1) var(--spacing-3);
  border: var(--border-width) solid rgb(var(--color-border-default));
  background: rgb(var(--color-bg-primary));
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  color: rgb(var(--color-text-secondary));
  cursor: pointer;
  transition: all var(--duration-normal) var(--easing-default);
}

.permission-toggle:hover {
  background: rgb(var(--color-bg-hover));
}

.permission-toggle.granted {
  background: rgba(var(--color-success), 0.15);
  color: rgb(var(--color-success));
  border-color: rgb(var(--color-success));
}

/* Triggers */
.triggers-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-2);
}

.trigger-item {
  padding: var(--spacing-1) var(--spacing-3);
  background: rgb(var(--color-bg-primary));
  border: var(--border-width) solid rgb(var(--color-accent-primary));
  border-radius: var(--radius-sm);
  font-family: var(--font-family-mono);
  font-size: var(--font-size-sm);
  color: rgb(var(--color-accent-primary));
}

/* Metadata */
.metadata {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-3);
}

.metadata-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: var(--font-size-sm);
}

.metadata-label {
  color: rgb(var(--color-text-secondary));
}

.metadata-value {
  font-weight: var(--font-weight-medium);
  color: rgb(var(--color-text-primary));
}

.metadata-value.enabled {
  color: rgb(var(--color-success));
}

.metadata-value.disabled {
  color: rgb(var(--color-text-secondary));
}
