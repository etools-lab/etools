{
  // ==========================================
  // rust-analyzer 项目级优化配置
  // 这个配置会覆盖用户设置
  // ==========================================
  
  // 并发控制 - 最重要的内存优化设置
  "numThreads": 4,
  
  // 禁用实验性功能
  "diagnostics.experimental": {
    "enable": false
  },
  
  // 优化诊断信息
  "diagnostics": {
    "disabled": [
      "inactive-code",
      "unresolved-proc-macro",
      "macro-error"
    ],
    "warningsAsHint": [],
    "warningsAsInfo": []
  },
  
  // 限制 Proc Macro 服务器的内存占用
  "procMacro": {
    "enable": true,
    "server": null,
    "attributes": {
      "enable": true
    }
  },
  
  // 文件监控优化
  "files": {
    "watcher": "client",
    "excludeDirs": [
      "target",
      "node_modules",
      "dist",
      "build",
      ".git",
      ".vscode",
      ".idea"
    ]
  },
  
  // 禁用或限制内存密集型功能
  "lens": {
    "enable": true,
    "run": false,
    "debug": false,
    "implementations": false,
    "references": {
      "adt": false,
      "enumVariant": false,
      "trait": false,
      "method": false
    },
    "methodReferences": false,
    "typeReferences": false
  },
  
  // Hover 功能优化
  "hover": {
    "actions": {
      "enable": false,
      "implementations": {
        "enable": false
      },
      "references": {
        "enable": false
      },
      "run": {
        "enable": false
      },
      "debug": {
        "enable": false
      },
      "gotoTypeDef": {
        "enable": false
      }
    },
    "documentation": {
      "enable": true
    },
    "links": {
      "enable": true
    },
    "memoryLayout": {
      "enable": false,
      "size": {
        "enable": false
      },
      "offset": {
        "enable": false
      },
      "alignment": {
        "enable": false
      },
      "niches": {
        "enable": false
      }
    }
  },
  
  // 禁用大部分 Inlay Hints
  "inlayHints": {
    "bindingModeHints": {
      "enable": false
    },
    "chainingHints": {
      "enable": false
    },
    "closingBraceHints": {
      "enable": false,
      "minLines": 25
    },
    "closureReturnTypeHints": {
      "enable": "never"
    },
    "discriminantHints": {
      "enable": "never"
    },
    "expressionAdjustmentHints": {
      "enable": "never",
      "hideOutsideUnsafe": false,
      "mode": "prefix"
    },
    "implicitDroplets": {
      "enable": "never"
    },
    "lifetimeElisionHints": {
      "enable": "never",
      "useParameterNames": false
    },
    "maxLength": 25,
    "parameterHints": {
      "enable": false
    },
    "reborrowHints": {
      "enable": "never"
    },
    "renderColons": true,
    "typeHints": {
      "enable": false,
      "hideClosureInitialization": false,
      "hideNamedConstructor": false
    }
  },
  
  // 补全功能优化
  "completion": {
    "autoimport": {
      "enable": false
    },
    "autoself": {
      "enable": true
    },
    "callable": {
      "snippets": "none"
    },
    "postfix": {
      "enable": false
    },
    "privateEditable": {
      "enable": false
    },
    "snippets": {
      "custom": {
        // 自定义代码片段留空以减少内存
      }
    },
    "fullFunctionSignatures": {
      "enable": false
    },
    "limit": 100,
    "terms": {
      "enable": false
    }
  },
  
  // 签名帮助
  "signatureInfo": {
    "detail": "full",
    "documentation": {
      "enable": false
    }
  },
  
  // 联合编译参数
  "cargo": {
    "features": "all",
    "extraArgs": [
      "--profile",
      "dev"
    ],
    "extraEnv": {},
    "loadOutDirsFromCheck": true,
    "buildScripts": {
      "enable": true,
      "overrideCommand": null,
      "useRustcWrapper": true
    },
    "noDefaultFeatures": false,
    "noSysroot": false,
    "rustcSource": null,
    "target": null,
    "useRustcWrapperForBuildScripts": true
  },
  
  // 检查配置
  "checkOnSave": {
    "allTargets": false,
    "command": "clippy",
    "extraArgs": [
      "--no-deps"
    ],
    "features": "all",
    "noDefaultFeatures": false,
    "overrideCommand": null,
    "analyzerTargets": null
  },
  
  // 代码分析优化
  "analysis": {
    "passes": {
      "adhoc": true,
      "bailouts": true,
      "macro_annotation": false
    },
    "featureFlags": false,
    "maxTargetHeight": 80,
    "maxInlayHintLength": 25,
    "parallel": "choke",
    "preloadCaps": {
      "enable": false
    }
  },
  
  // 辅助功能
  "assist": {
    "emitMustUse": false,
    "expressionFillDefault": "todo",
    "importEnforceGranularity": false,
    "importMergeBehavior": "crate",
    "importMergeBehaviour": "crate",
    "importPrefix": "crate",
    "insertUse": {
      "granularity": "crate"
    }
  },
  
  // 导入优化
  "imports": {
    "granularity": {
      "group": "module",
      "enforce": false
    },
    "prefix": "crate",
    "locatePrefer": {
      "absolute": false
    }
  },
  
  // 语义高亮优化
  "semanticHighlighting": {
    "strings": {
      "enable": false
    },
    "punctuation": {
      "enable": false,
      "separate": {
        "associated": false,
        "attributeBracket": false,
        "angle": false,
        "brace": false,
        "bracket": false,
        "colon": false,
        "comma": false,
        "dot": false,
        "parenthesis": false,
        "squareBracket": false
      },
      "specialize": {
        "attributeBracket": false,
        "angle": false,
        "brace": false,
        "bracket": false,
        "colon": false,
        "comma": false,
        "dot": false,
        "parenthesis": false,
        "squareBracket": false
      }
    }
  },
  
  // 工作空间符号搜索限制
  "workspace": {
    "symbol": {
      "search": {
        "kind": "only_types",
        "limit": 128,
        "scope": "workspace"
      }
    }
  },
  
  // 类型格式化
  "typeFormatting": {
    "maxWidth": 80
  },
  
  // Rustc 源代码(禁用以节省内存)
  "rustc": {
    "source": null
  },
  
  // 排除的 Glob 模式
  "excludeGlobs": [
    "**/node_modules",
    "**/target",
    "**/dist",
    "**/build",
    "**/*.generated.rs",
    "**/tests/data",
    "**/benches/data"
  ]
}
